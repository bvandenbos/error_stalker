 #!/usr/bin/env ruby
  
 require File.expand_path('../lib/exceptionl/server', File.dirname(__FILE__))
 require 'vegas'

 ENV['RACK_ENV'] ||= 'development'
 
 Vegas::Runner.new(Exceptionl::Server, 'exceptionl_server', {
     :foreground => true,
     :before_run => lambda {|v|
       config_file = ENV['EXCEPTIONL_CONFIG'] || v.args.first
       if config_file
         params = YAML.load(File.read(config_file))[ENV['RACK_ENV']]
         Exceptionl::Server.configuration = params
       end
     }
   })
